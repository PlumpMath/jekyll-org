<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
    <link rel="stylesheet" type="text/css" 
          href="../css/default.css" title="default"></link>
    <title>Emacs Screencast: nXML Mode</title>
  <script type="text/javascript" language="javascript"><!--
/* Jesse Ruderman
 * July 18, 2004
 *
 * Remaining problems:
 *   IE sometimes crashes on exit after using the this script.
 *   In IE, it is a little ugly because IE doesn't support border-radius.
 *   In IE, it does not work at standalone Flash URLs.
 */

function setupSeekBar() {

setTimeout(initFlashControls, 100);

function initFlashControls()
{
  var count = 0;

  function tt(elem)
  {
    if (typeof elem.TotalFrames != "undefined") /* do not coerce elem.StopPlay to bool, because that breaks IE */
    {
      addFlashControls(elem);
      ++count;
    }
  }

  var i, x;

  for (i = 0; x = document.getElementsByTagName("object")[i]; ++i)
    tt(x);

  for (i = 0; x = document.getElementsByTagName("embed")[i]; ++i)
    tt(x);

}


function addFlashControls(flash)
{
  var controlsDiv = document.createElement("div");

  /* Put the controls under the Flash. 
   *
   * If the Flash is an <embed> in an <object>, we do not want to touch the <object>, because that would make
   * Mozilla re-test whether the <object> is broken and reset the <embed>.  So in that case, we put the controls
   * under the <object>.
   */
  var where = flash;
  while (where.parentNode.tagName.toLowerCase() == "object")
    where = where.parentNode;
  where.parentNode.insertBefore(controlsDiv, where.nextSibling);

  /* Construct controls using DOM2 instead of innerHTML.
   * In Mozilla, innerHTML= is like innerText= at standalone flash URLs.
   */
  var table = document.createElement("table");
  controlsDiv.appendChild(table);
  
  var row = table.insertRow(-1);
  
  var pauseButton = document.createElement("button");
  pauseButton.appendChild(document.createTextNode("Pause"));
  var buttonCell = row.insertCell(-1);
  buttonCell.appendChild(pauseButton);
  
  var slider = row.insertCell(-1);
  slider.width = "100%";
  
  var visibleSlider = document.createElement("div");
  visibleSlider.style.position = "relative";
  visibleSlider.style.height = "10px";
  visibleSlider.style.width = "100%";
  visibleSlider.style.MozBorderRadius = "4px";
  visibleSlider.style.background = "#aaa";
  slider.appendChild(visibleSlider);
  
  var thumb = document.createElement("div");
  thumb.style.position = "absolute";
  thumb.style.height = "20px";
  thumb.style.width = "10px";
  thumb.style.top = "-5px";
  thumb.style.MozBorderRadius = "4px";
  thumb.style.background = "#666";
  visibleSlider.appendChild(thumb);
  

  var sliderWidth;
  var paused = false;
  var dragging = false;

  table.width = Math.max(parseInt(flash.width) || 0, 400);
  
  addEvent(pauseButton, "click", pauseUnpause);
  addEvent(slider, "mousedown", drag);
  addEvent(slider, "drag", function() { return false; }); /* For IE */
  window.setInterval(update, 30);

  function pauseUnpause()
  {
    paused = !paused;

    pauseButton.style.borderStyle = paused ? "inset" : "";

    if (paused)
      flash.StopPlay();
    else
      flash.Play();
  }

  function update()
  {
    sliderWidth = parseInt(getWidth(slider) - getWidth(thumb));

    if (!paused && !dragging)
      thumb.style.left = parseInt(flash.CurrentFrame() / totalFrames() * sliderWidth) + "px";
  }

  function dragMousemove(e)
  {
    var pageX = e.clientX + document.body.scrollLeft; /* cross-browser, unlike e.pageX, which IE does not support */
    var pos = bounds(0, pageX - getX(slider) - 5, sliderWidth);
    var frame = bounds(1, Math.ceil(totalFrames() * pos / sliderWidth), totalFrames() - 2);

    thumb.style.left = pos + "px";

    flash.GotoFrame(frame);
  }

  function release(e)
  {
    removeEvent(document, "mousemove", dragMousemove);
    removeEvent(document, "mouseup", release);
    if (!paused)
      flash.Play();
    dragging = false;
  }

  function drag(e)
  {
    addEvent(document, "mousemove", dragMousemove);
    addEvent(document, "mouseup", release);
    dragging = true;
    dragMousemove(e);
  }



  /* Boring functions, some of which only exist to hide differences between IE and Mozilla. */

  function bounds(min, val, max)
  {
    return Math.min(Math.max(min, val), max);
  }

  function totalFrames()
  {
    /* This is weird.  TotalFrames differs between IE and Mozilla.  CurrentFrame does not. */

    if (typeof flash.TotalFrames == "number")
      return flash.TotalFrames; /* IE */
    else if (typeof flash.TotalFrames == "function")
      return flash.TotalFrames(); /* Mozilla */
    else
      return 1; /* Partially loaded Flash in IE? */
  }

  function getWidth(elem)
  {
    if (document.defaultView && document.defaultView.getComputedStyle)
      return parseFloat(document.defaultView.getComputedStyle(elem,null).getPropertyValue("width")); /* Mozilla */
    else
      return parseFloat(elem.offsetWidth); /* IE (currentStyle.width can be "auto" or "100%") */
  }

  function getX(elem)
  {
    if (!elem) return 0;
    return (elem.offsetLeft) + getX(elem.offsetParent);
  }

  function addEvent(elem, eventName, fun)
  {
    if (elem.addEventListener) /* Mozilla */
      elem.addEventListener(eventName, fun, false);
    else /* IE */
      elem.attachEvent("on" + eventName, fun);
  }

  function removeEvent(elem, eventName, fun)
  {
    if (elem.addEventListener)
      elem.removeEventListener(eventName, fun, false);
    else
      elem.detachEvent("on" + eventName, fun);
  }

}

}
//-->
</script>
  </head>

  <body onload="setupSeekBar();">
    <h2>Emacs Screencast: nXML Mode</h2>

    <p class="navigator" style="text-align: right">
      English | Korean</p>

    <p class="navigator">
      <a href="emacs-artist.html">Previous</a> |
      <a href="index.html">Up</a> |
      Next</p>

    <hr/>

    <p>
      Demonstrates nXML mode (a new major mode for XML available from
      <a href="http://www.thaiopensource.com/nxml-mode/">here</a>.
      Since the author's voice is in Korean, You may not understand
      my voice, but I'm sure that it will not border you to understand
      this screencast.
    </p>
    
    <p>
      Note that this is a simple demonstration that does not utilizes
      lots of powerful features of nxml-mode. (nxml-mode is far, far
      greater than what I demonstrate here!!) This only demonstrates
      the way that I write HTML files, check the spellings, preview
      the files, and register to the version control system (in this
      case, CVS.)
    </p>

    <object
       type="application/x-shockwave-flash"
       data="emacs-nxml.swf"
       width="612" height="570">
       <param name="movie" value="emacs-nxml.swf"/>
       <param name="play" value="true"/>
       <param name="loop" value="False"/>
       <param name="quality" value="low"/>
         <!--
         <embed src="emacs-nxml.swf" width="612" height="570" play="true"
                loop="False" quality="low" type="application/x-shockwave-flash"
                pluginspage="http://www.macromedia.com/go/getflashplayer">
         </embed>
         -->
    </object>

    <p>
      Beside editing commands, above demonstration uses following Emacs
      features:
    </p>

    <ul>
      <li>Org mode: the first screen.</li>
      <li><span class="tt">C-x v v</span> to add/commit the HTML file
        to the CVS (version control system).</li>
      <li>w3m mode (an interface to w3m): available from
        <a href="http://emacs-w3m.namazu.org">here</a>.</li>
      <li>ispell: to check the spelling of the HTML file.</li>
      <li><span class="tt">M-/</span> (dabbrev-expand) to expand the
        pre-inputted text.</li>
    </ul>

    <p>
      I made this screenshot
      using <a href="http://xvidcap.sourceforge.net/">xvidcap</a> to
      generated MPEG file, and downsizing/converting the file to SWF
      using mencoder(1).  Currently, the scrollbar attached to the SWF
      file in this page is not working. (Don't know why.)
    </p>

    <hr/>

    <div style="float: right">
      <a href="http://www.anybrowser.org/campaign/">
        <img border="0" src="../img/anybrowser.png"
	     alt="Any Browser Campaign"/></a>
      <a href="http://jigsaw.w3.org/css-validator/check/referer">
	<img border="0"
	     src="../img/w3c-css.png"
	     alt="Valid CSS!" /></a>
      <a href="http://validator.w3.org/check?uri=referer">
	<img src="../img/w3c-xhtml.png" border="0"
	     alt="Valid XHTML 1.0!"/></a>

      <br/>

      <a href="http://www.gnu.org/software/emacs/">
        <img border="0" src="../img/emacs-powered.png"
             alt="Emacs Powered"/></a>
      <a href="http://www.gimp.org/">
        <img border="0" src="../img/gimp-powered.png"
             alt="Graphics by GIMP"/></a>
      <a href="http://www.vim.org/">
        <img border="0" src="../img/vim-powered.png"
             alt="Vim Powered"/></a>
    </div>

    <p class="footer">
      The latest version is available at 
      <a href="http://www.cinsk.org/">here</a>.

      <br/>

      Copyright &copy; 2008  
      Seong-Kook Shin.  All rights reserved.

    <br/>
    <img src="../img/contact.png" alt="contact"/>
    </p>

  </body>
</html>
